Bono x venta
Condiciones LC


2928206
Cr.19521

10.2.1.57

IP SERVER UNICO

10.2.1.13 esta las formas

10.2.1.15 esta las formas

10.2.1.15 formas- vnc ItsoporT.

formas: Register2016

10.2.1.57 : Guatemala2015

    alcance (max)     Venta                         20%                BRONCE                             4000     4600        min            Venta                           20%                  BRONCE                 4000(alcance)  105.8%
=SI(N4>1.15;(BUSCARV(O$2;'Condiciones LC'!$A$17:$B$21;2;FALSO)*BUSCARV($J4;'Condiciones LC'!$A$10:$D$13;4;FALSO)*1.15);SI(N4>0.8499;(BUSCARV(O$2;'Condiciones LC'!$A$17:$B$21;2;FALSO)*BUSCARV($J4;'Condiciones LC'!$A$10:$D$13;4;FALSO)*N4);0))
192 


Se creara una tabla para las variables (kpis)

id automatico
name
porcentaje
minimus_bonus
maximus_bonus
Tabla para las categorias ya esta creada
las cadena es de forma global contiene muchas sucursales

kpis  
id             automatico
kpis           Varchar2(30)
percentage     Number
from minimum   Number
up to maximum  Number

create table KPIS(
KPI_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
NAME           Varchar2(30 BYTES) Not Null,
STATUS	       VARCHAR2(1)        DEFAULT '0',
PERCENTAJE     Number             Default 0 Not Null,
FROM_MINIMUM   Number             Default 0 Not Null,
UPTO_MAXIMUM   Number             Default 0 Not Null,
CREATED	       DATE	          Not Null,
CREATED_BY     VARCHAR2(255)	  Not Null,
UPDATED	       DATE               Not Null,
UPDATED_BY     VARCHAR2(255)	  Not Null);

CREATE or REPLACE TRIGGER KPIS_TRIGGER
before UPDATE OR INSERT ON KPIS
FOR EACH ROW
DECLARE
BEGIN
    if inserting then 
        :new.created := sysdate; 
        :new.created_by := coalesce(sys_context('APEX$SESSION','APP_USER'),user); 
    end if; 
    :new.updated := sysdate; 
    :new.updated_by := coalesce(sys_context('APEX$SESSION','APP_USER'),user); 
end;

